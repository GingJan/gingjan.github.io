<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  
  <title>PHP的静/动态——全/局变量 | Zjien&#39;s blog | 技术令人向往，但更令人向往的是——生活。</title>

  
  <meta name="author" content="GingJan">
  

  
  <meta name="description" content="记录学习上问题，思想上的闪光点">
  

  
  
  <meta name="keywords" content="PHP,变量,静/动态—全/局变量">
  

  <meta id="viewport" name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no, minimal-ui">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">

  <meta property="og:title" content="PHP的静/动态——全/局变量"/>

  <meta property="og:site_name" content="Zjien&#39;s blog"/>

  
  <meta property="og:image" content="/favicon.ico"/>
  

  <link href="/favicon.ico" rel="icon">
  <link rel="alternate" href="/atom.xml" title="Zjien&#39;s blog" type="application/atom+xml">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
</head>


<body>
<div class="blog">
  <div class="content">

    <header>
  <div class="site-branding">
    <h1 class="site-title">
      <a href="/">Zjien&#39;s blog</a>
    </h1>
    <p class="site-description">技术令人向往，但更令人向往的是——生活。</p>
  </div>
  <nav class="site-navigation">
    <ul>
      
        <li><a href="/">Home</a></li>
      
        <li><a href="/archives">Archives</a></li>
      
        <li><a href="/tags">Tags</a></li>
      
        <li><a href="/about">About</a></li>
      
    </ul>
  </nav>
</header>

    <main class="site-main posts-loop">
    <article>

  
    
    <h3 class="article-title"><span>PHP的静/动态——全/局变量</span></h3>
    
  

  <div class="article-top-meta">
    <span class="posted-on">
      <a href="/2016/05/15/php-variables/" rel="bookmark">
        <time class="entry-date published" datetime="2016-05-15T06:25:07.000Z">
          2016-05-15
        </time>
      </a>
    </span>
  </div>


  

  <div class="article-content">
    <div class="entry">
      
        <p>　　<strong> PHP变量：本文介绍PHP的各种变量，全局静态变量、全局变量、局部静态变量、局部变量</strong><br>    <excerpt in="" index="" |="" 首页摘要=""> </excerpt></p>
<a id="more"></a>
<the rest="" of="" contents="" |="" 余下全文="">


<p><code>全局变量/局部变量</code>也即是<code>全局动态变量/局部动态变量</code>=<code>全局普通变量/局部普通变量</code>=<code>外部变量/内部变量</code></p>
<p>实际上，全局变量(也即全局动态变量/全局普通变量)本身就是静态存储方式，所以全局静态变量也是静态存储方式。全局变量和静态变量都是存储在同一个地方。于是所有全局变量也是静态变量。</p>
<p>静态变量不可以赋表达式，只可以赋常量或者常量表达式，如果定义时没有初始化，系统会自动初始化为0(int)或者’’(空string)。也即可以定义时不进行初始化。<br>普通变量一定要初始化，如果不进行初始化，那么在定义时它的值是不确定的</p>
<h2 id="全局变量-全局动态变量"><a href="#全局变量-全局动态变量" class="headerlink" title="全局变量/全局动态变量"></a>全局变量/全局动态变量</h2><p>非全局静态变量（全局动态变量）的作用域是整个源程序，当一个源程序由多个源文件组成时，非静态的全局变量在各个源文件中都是有效的。</p>
<h2 id="全局静态变量"><a href="#全局静态变量" class="headerlink" title="全局静态变量"></a>全局静态变量</h2><p>全局静态变量则限制了其作用域，只在定义该变量的源文件内有效，在同一源程序(一个源程序由多个源文件组成)的其它源文件中不能使用它。要定义/声明全局静态变量(外部静态变量)可以在前面加上<code>static</code>关键字</p>
<h2 id="局部变量-局部动态变量"><a href="#局部变量-局部动态变量" class="headerlink" title="局部变量/局部动态变量"></a>局部变量/局部动态变量</h2><p>凡是局部变量（无论是普通变量还是静态变量）的作用域都是局限与某个小区域内（如函数），普通变量在每次函数调用完后，存储的内容都会消失（实际上不一定，这涉及到php的底层内核原理）</p>
<h2 id="局部静态变量"><a href="#局部静态变量" class="headerlink" title="局部静态变量"></a>局部静态变量</h2><p>局部静态变量的作用域也是局限与某个小区域（如函数），不同的只是函数每次调用结束后，变量的值不会丢失而是依然存在，在下次函数被调用时，该可以从该静态变量获取之前的值。</p>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>把局部变量改变为局部静态变量后是改变了它的存储方式，即改变了它的<code>生存期</code>。<br>把全局变量改变为全局静态变量后是改变了它的<code>作用域</code>，限制了它的使用范围。static静态变量会被放在程序的全局存储区中（即在程序的全局数据区，而不是在栈中分配，所以不会导致栈溢出），这样可以在下一次调用的时候还可以保持原来的赋值。这一点是它与栈变量和堆变量的区别。</p>
<h2 id="代码演示"><a href="#代码演示" class="headerlink" title="代码演示"></a>代码演示</h2><figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;?php</span></div><div class="line"><span class="comment">//--------------如何理解static静态变量-----------</span></div><div class="line"></div><div class="line"><span class="comment">/* 普通局部变量 */</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">local</span><span class="params">()</span> </span>&#123;</div><div class="line">	$loc = <span class="number">0</span>; <span class="comment">//这样，如果直接不给初值0是错误的。</span></div><div class="line">	++$loc;</div><div class="line">	<span class="keyword">echo</span> $loc . <span class="string">'&lt;br&gt;'</span>;</div><div class="line">&#125;</div><div class="line">local(); <span class="comment">//1</span></div><div class="line">local(); <span class="comment">//1</span></div><div class="line">local(); <span class="comment">//1</span></div><div class="line"><span class="keyword">echo</span> <span class="string">'===================================&lt;br/&gt;'</span>;</div><div class="line"></div><div class="line"><span class="comment">/* static静态局部变量 */</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">static_local</span><span class="params">()</span> </span>&#123;</div><div class="line">	<span class="keyword">static</span> $local = <span class="number">0</span> ; <span class="comment">//此处可以不赋0值</span></div><div class="line">	$local++;</div><div class="line">	<span class="keyword">echo</span> $local , <span class="string">'&lt;br&gt;'</span>;</div><div class="line">&#125;</div><div class="line">static_local(); <span class="comment">//1</span></div><div class="line">static_local(); <span class="comment">//2</span></div><div class="line">static_local(); <span class="comment">//3</span></div><div class="line"><span class="comment">//echo $local; 注意虽然静态变量，但是它仍然是局部的，在外不能直接访问的。</span></div><div class="line"><span class="keyword">echo</span> <span class="string">'=======================================&lt;br/&gt;'</span>;</div><div class="line"></div><div class="line"><span class="comment">/* static全局静态变量(实际上:全局变量本身就是静态存储方式,所以所有的全局变量都是静态变量) */</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">static_global</span><span class="params">()</span> </span>&#123;</div><div class="line">    <span class="comment">//global 就是引用外部的全局变量</span></div><div class="line">	<span class="keyword">global</span> $glo; <span class="comment">//此处，可以不赋值0，当然赋值0，后每次调用时其值都为0，每次调用函数得到的值都会是1，但是不能想当然的写上"static"加以修饰，那样是错误的.</span></div><div class="line">	$glo++;</div><div class="line">	<span class="keyword">echo</span> $glo . <span class="string">'&lt;br&gt;'</span>;</div><div class="line">&#125;</div><div class="line">static_global(); <span class="comment">//1</span></div><div class="line">static_global(); <span class="comment">//2</span></div><div class="line">static_global(); <span class="comment">//3</span></div><div class="line"><span class="meta">?&gt;</span></div></pre></td></tr></table></figure>
<p><a href="http://hao.jser.com/archive/7370/" title="参考" target="_blank" rel="external">本文参考：http://hao.jser.com/archive/7370/</a><br><a href="http://php.net/manual/zh/language.variables.scope.php" title="官方手册" target="_blank" rel="external">【php官方手册】</a></p>
</the>
      
    </div>

  </div>

  <div class="article-footer">
    <div class="article-meta pull-left">

    
      

    <span class="post-categories">
      <i class="icon-categories"></i>
        <a href="/categories/PHP/">PHP</a>, <a href="/categories/PHP/基础/">基础</a>
    </span>
    

    
    

    <span class="post-tags">
      <i class="icon-tags"></i>
        <a href="/tags/PHP/">PHP</a><a href="/tags/变量/">变量</a><a href="/tags/静-动态—全-局变量/">静/动态—全/局变量</a>
    </span>
    

    </div>

    
  </div>
</article>


    </main>

    <footer class="site-footer">
  <p class="site-info">
    Proudly powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and
    Theme by <a href="https://github.com/CodeDaraW/Hacker" target="_blank">Hacker</a>
    </br>
    
    &copy; 2019 GingJan
    
  </p>
</footer>
    
<script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-99144700-1', 'auto');
    ga('send', 'pageview');

</script>

  </div>
</div>
</body>
</html>